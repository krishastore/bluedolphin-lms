(()=>{var e,i;window.wp=window.wp||{},e=jQuery,i=window.wp,window._inlineEditQuestion={postId:0,editRowId:0},window.questionBank={inlineEditQuestion:function(){if("undefined"!=typeof inlineEditPost){var i=inlineEditPost.edit;inlineEditPost.edit=function(t){i.apply(this,arguments);var n=0;if("object"==typeof t&&(n=parseInt(this.getId(t))),n>0){var s=e("#edit-"+n),d=e("#post-"+n),a=e(".column-levels",d).text();e(".inline-edit-levels select",s).val(a?.toLowerCase())}},e(document).on("click",".show_answer a",(function(){var i=inlineEditPost,t=questionBank,n=e(this).parents("tr"),s=i.getId(n),d=e(this).data("inline_edit"),a=d?.type;t.hideAnswers(),window._inlineEditQuestion={postId:s,editRowId:i.what+s},e(this).attr("aria-expanded","true");var l=e("#inline-edit").clone(!0),o=e("#show_answer").html();if(l.html(o),e("td",l).attr("colspan",e("th:visible, td:visible",".widefat:first thead").length),e("td",l).find("#quick-edit-legend").removeAttr("id"),e("td",l).find('p[id^="quick-edit-"]').removeAttr("id"),e(i.what+s).removeClass("is-expanded").hide().after(l).after('<tr class="hidden"></tr>'),e('input[name="post_title"]',l).val(d?.title),e("select#bdlms_answer_type",l).val(d?.type),e(".marks-input input",l).val(d?.marks),d[a]){var r=e(".bdlms-options-table__body .bdlms-options-table__list-wrap",e("#"+a));r.empty(),e.each(d[a],(function(i,t){var n=e("#"+a+"_option").html();n=(n=(n=(n=n.replace("{{VALUE}}",t.option)).replace("{{checked}}",t.checked?"checked":"")).replace("{{ANSWER_ID}}",i)).replace("{{OPTION_NO}}",questionObject.alphabets[i]??""),e(n).appendTo(r)})),e("#"+a).removeClass("hidden")}else if("fill_blank"===a){var c=e("#fill_blank_mandatory").html();c=c.replace("{{VALUE}}",d?.mandatory),e("ul","#"+a).empty(),e("ul","#"+a).append(c),e.each(d?.optional,(function(i,t){var n=e("#fill_blank_optional").html();n=n.replace("{{VALUE}}",t),e(n).appendTo(e("ul","#"+a))})),e("#"+a).removeClass("hidden")}e("#bdlms_answer_type").change(),e(l).attr("id","edit-"+s).addClass("inline-editor").show(),t.initSortable(t)})),e(document).on("click",".bdlms-cancel-answer",this.hideAnswers)}},init:function(){var i=this;i.inlineEditQuestion(),i.initSortable(i),e(document).on("change","#bdlms_answer_type",(function(){var i=e(this).val();"true_or_false"===i?e(".bdlms-add-option, .bdlms-show-ans-action .bdlms-add-answer").addClass("hidden"):e(".bdlms-add-option, .bdlms-show-ans-action .bdlms-add-answer").removeClass("hidden"),e(".bdlms-answer-group, .inline-edit-col-left .bdlms-options-table, .inline-edit-col-left .bdlms-add-accepted-answers").addClass("hidden"),e("#"+i).removeClass("hidden")})),e("#bdlms_answer_type").change(),e(document).on("click",".button-link.editinline",(function(){e(".inline-edit-private").parents("div.inline-edit-group").remove();var i=jQuery(".inline-edit-col-right:not(.inline-edit-levels):visible"),t=jQuery("select",i).val();jQuery(" > *",i).appendTo(".inline-edit-col-left:visible"),jQuery('.inline-edit-col-left:visible select[name="_status"]').val(t)})),e(document).on("click",".bdlms-remove-answer",this.removeAnswer),e(document).on("click",".bdlms-add-answer",this.addNewAnswer),e(document).on("click",".bdlms-save-answer",this.saveInlineEdit)},initSortable:function(i){var t=i;e(".bdlms-sortable-answers",document).sortable({appendTo:"parent",axis:"y",containment:"parent",items:"ul.bdlms-options-table__list",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(){t.reorderAnswer()}}).disableSelection()},hideAnswers:function(){e(".inline-editor").prev().prev("tr").show(),e(".inline-editor").prev("tr.hidden").remove(),e(".inline-editor").remove()},removeAnswer:function(i){i.preventDefault(),e(this).parents("ul.bdlms-options-table__list").remove(),questionBank.reorderAnswer()},reorderAnswer:function(){e(".bdlms-sortable-answers .bdlms-options-table__list:visible").each((function(i,t){var n=questionObject.alphabets[i];e(t).find(".bdlms-options-no").text(n+"."),e(t).find(".bdlms-option-check-td input").val(i)}))},addNewAnswer:function(){var i=e("ul.bdlms-options-table__list:visible:last, .bdlms-add-accepted-answers li:visible:last"),t=i.clone();t.find("input").val("").removeAttr("value"),t.find("input:checkbox, input:radio").prop("checked",!1).removeAttr("checked"),e(t).insertAfter(i),questionBank.reorderAnswer()},saveInlineEdit:function(){var t,n=e(this),s=e(".post_status_page").val()||"",d=window._inlineEditQuestion.postId;return e("table.widefat .spinner").addClass("is-active"),n.attr("disabled",!0),t={action:"inline-save",post_type:typenow,post_ID:d,edit_date:"",post_status:s},t=e("#edit-"+d).find(":input").serialize()+"&"+e.param(t),e.post(ajaxurl,t,(function(t){var n=e("#edit-"+d+" .inline-edit-save .notice-error"),s=n.find(".error");e("table.widefat .spinner").removeClass("is-active"),t?-1!==t.indexOf("<tr")?(e(window._inlineEditQuestion.editRowId).siblings("tr.hidden").addBack().remove(),e("#edit-"+d).before(t).remove(),e(window._inlineEditQuestion.editRowId).hide().fadeIn(400,(function(){e(this).find("[data-inline_edit]").attr("aria-expanded","false").trigger("focus"),i.a11y.speak(i.i18n.__("Changes saved."))}))):(t=t.replace(/<.[^<>]*?>/g,""),n.removeClass("hidden"),s.html(t),i.a11y.speak(s.text())):(n.removeClass("hidden"),s.text(i.i18n.__("Error while saving the changes.")),i.a11y.speak(i.i18n.__("Error while saving the changes.")))}),"html"),!1}},e((function(){questionBank.init()}))})();